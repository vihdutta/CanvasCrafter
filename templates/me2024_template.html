<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
        }
        .grid-row {
            display: flex;
            flex-wrap: wrap;
            margin-left: -15px;
            margin-right: -15px;
        }
        .col-sm-12, .col-md-12, .col-lg-4, .col-lg-6, .col-md-7, .col-md-5, .col-xs-12 {
            padding-left: 15px;
            padding-right: 15px;
            box-sizing: border-box;
            width: 100%; /* Default for smaller screens */
        }

        /* Basic responsive column sizing (simplified) */
        @media (min-width: 992px) { /* Corresponds to 'lg' breakpoint */
            .col-lg-4 {
                width: 33.3333%;
            }
            .col-lg-6 {
                width: 50%;
            }
        }
        @media (min-width: 768px) { /* Corresponds to 'md' breakpoint */
            .col-md-5 {
                width: 41.6667%;
            }
            .col-md-6 {
                 width: 50%;
            }
            .col-md-7 {
                width: 58.3333%;
            }
        }
        /* General styling */
        .content-box {
            padding: 10px;
        }
        .styleguide-section__grid-demo-element {
            margin-bottom: 15px;
        }
        h2, h3 {
            color: #000000;
        }
        hr {
            border: 0;
            border-top: 1px solid #ccc;
            margin: 20px 0;
        }
    </style>
</head>
<body>

<section>
<div style="background-color: #d5e0ec; padding-left: 15px;">
    <h2 style="text-align: center;"><span style="color: #000000;">Overview - Week {{ week_number }}</span></h2>
</div>
<p>{{ week.overview_statement }}</p>
</section>

<section>
    <div class="content-box">
        <div class="grid-row">
            <div class="col-sm-12 col-lg-6">
                <div class="styleguide-section__grid-demo-element">
                    <div style="background-color: #fcf7d2;">
                        <div style="background-color: #d5e0ec; padding-left: 15px;">
                            <h3 style="text-align: center;"><img role="presentation" src="{{ icon_urls.get('schedule-icon', 'https://via.placeholder.com/47x32?text=Schedule') }}" alt="Schedule Icon" width="47" height="32" /><span style="color: #000000;"> Schedule Info</span></h3>
                        </div>
                        <p style="text-align: center;"><span style="color: #000000;">Last Week:</span> {{ last_week_text|safe }}</p>
                        <p style="text-align: center;"><span style="color: #000000;">Next Week:</span> {{ next_week_text|safe }}</p>
                        <p style="text-align: center;"><a href="https://umich.instructure.com/courses/{{ course_id }}/modules">See the Full Course Schedule</a></p>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-lg-6">
                <div class="styleguide-section__grid-demo-element">
                    <div style="background-color: #fcf7d2;">
                        <div style="background-color: #d5e0ec; padding-left: 15px;">
                            <h3 style="text-align: center;"><span style="color: #000000;"><img role="presentation" src="{{ icon_urls.get('upcoming-work-icon', 'https://via.placeholder.com/24x26?text=Work') }}" alt="Upcoming Work Icon" width="24" height="26" /> UPCOMING WORK</span></h3>
                        </div>
                        <!-- UPCOMING WORK -->
                        <!-- Note: Homework assignments are now clearly separated by type -->

                        <!-- HOMEWORK ASSIGNMENTS DUE THIS WEEK -->
                        {% for hw in homework_due_this_week %}
                            {% if homework_urls and hw.homework_key in homework_urls %}
                                <p style="text-align: center;"><span style="font-size: 14pt;"><span style="color: #000000;"><a href="{{ homework_urls[hw.homework_key] }}">HOMEWORK {{ hw.homework_number }}</a>: </span><span style="color: #6b0707;">DUE {{ hw.due_date }}</span></span></p>
                            {% else %}
                                <p style="text-align: center;"><span style="font-size: 14pt;"><span style="color: #000000;">HOMEWORK {{ hw.homework_number }}: </span><span style="color: #6b0707;">DUE {{ hw.due_date }}</span></span></p>
                            {% endif %}
                        {% endfor %}

                        <!-- HOMEWORK ASSIGNMENTS OPENING THIS WEEK -->
                        {% for hw in homework_opening_this_week %}
                            {% if homework_urls and hw.homework_key in homework_urls %}
                                <p style="text-align: center;"><span style="font-size: 14pt;"><span style="color: #000000;"><a href="{{ homework_urls[hw.homework_key] }}">HOMEWORK {{ hw.homework_number }}</a>: OPENS {{ hw.assigned_date }}, </span><span style="color: #6b0707;">DUE {{ hw.due_date }}</span></span></p>
                            {% else %}
                                <p style="text-align: center;"><span style="font-size: 14pt;"><span style="color: #000000;">HOMEWORK {{ hw.homework_number }}: OPENS {{ hw.assigned_date }}, </span><span style="color: #6b0707;">DUE {{ hw.due_date }}</span></span></p>
                            {% endif %}
                        {% endfor %}

                        <!-- UPCOMING CHECKOUT -->
                        {% if next_checkout %}
                            {% set checkout_name = "Checkout" + next_checkout.checkout_number|string %}
                            {% if checkout_urls and checkout_name in checkout_urls %}
                                <p style="text-align: center;"><span style="font-size: 14pt;"><span style="color: #000000;"><a href="{{ checkout_urls[checkout_name] }}">CHECKOUT {{ next_checkout.checkout_number }}</a>: </span><span style="color: #6b0707;">{{ next_checkout.date }}</span></span></p>
                            {% else %}
                                <p style="text-align: center;"><span style="font-size: 14pt;"><span style="color: #000000;">CHECKOUT {{ next_checkout.checkout_number }}: </span><span style="color: #6b0707;">{{ next_checkout.date }}</span></span></p>
                            {% endif %}
                        {% endif %}

                        <!-- UPCOMING QUIZ -->
                        {% if next_quiz %}
                            {% set quiz_name = "Quiz" + next_quiz.quiz_number|string %}
                            {% if quiz_urls and quiz_name in quiz_urls %}
                                <p style="text-align: center;"><span style="font-size: 14pt;"><span style="color: #000000;"><a href="{{ quiz_urls[quiz_name] }}">QUIZ {{ next_quiz.quiz_number }}</a>: </span><span style="color: #6b0707;">{{ next_quiz.date }}</span></span></p>
                            {% else %}
                                <p style="text-align: center;"><span style="font-size: 14pt;"><span style="color: #000000;">QUIZ {{ next_quiz.quiz_number }}: </span><span style="color: #6b0707;">{{ next_quiz.date }}</span></span></p>
                            {% endif %}
                        {% endif %}
                        </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div style="background-color: #d5e0ec; padding-left: 15px;">
    <h2 style="text-align: center;"><span style="color: #000000;">Module {{ week.module }} Learning Objectives: {{ week.learning_objectives_topic }}</span></h2>
</div>
<div class="content-box">
    <div class="grid-row">
        <div class="col-md-7 col-sm-12 col-xs-12">
            <ul>
                {% for objective in week.learning_objectives %}
                    <li>LO{{ loop.index }}: {{ objective }}</li>
                {% endfor %}
            </ul>
            <div style="background-color: #efeff8; padding-left: 15px; border-radius: 10px; min-width: 75%; margin: auto;">
                <h3 style="text-align: center;">Additional Example Problems</h3>
            </div>
            <p>If you're looking for additional example problems to illustrate these learning objectives or to study from, check out the <a href="https://umich.instructure.com/courses/{{ course_id }}/pages/additional-example-problems-module-{{ week.module }}">additional example problems page for module {{ week.module }}</a>.</p>
        </div>
        <div class="col-md-5 col-sm-12 col-xs-12">
            <figure style="text-align: center; border: 1px solid black; padding: 10px;">
                <img src="{{ week.image.image_path }}" style="width: 320px; height: auto;" alt="Module diagram">
                <figcaption>{{ week.image.caption }}</figcaption>
            </figure>
        </div>
    </div>
</div>

<section>
    <div style="background-color: #d5e0ec; padding-left: 15px;">
        <h2 style="text-align: center;"><span style="color: #000000;">Week {{ week_number }} Activities</span></h2>
    </div>
    <div class="content-box">
        <div class="grid-row">
            {% for day in week_days %}
            <div class="col-sm-12 col-md-12 col-lg-4">
                <div class="styleguide-section__grid-demo-element">
                    <div style="background-color: {{ day.color }}; padding-left: 15px;">
                        {% if (day.data.topic and "No Class" in day.data.topic) or (not day.data.topic or not day.data.topic.strip()) %}
                            <h2 style="text-align: center;"><span style="color: #000000;">{{ day.display_name }} - NO CLASS</span></h2>
                        {% else %}
                            <h2 style="text-align: center;"><span style="color: #000000;">{{ day.display_name }}</span></h2>
                        {% endif %}
                        {% if day.date %}
                            <h2 style="text-align: center;"><span style="color: #000000;">{{ day.date }}</span></h2>
                        {% endif %}
                    </div>
                    <h3>Before Class</h3>
                    {% if (day.data.topic and "No Class" in day.data.topic) or (not day.data.topic or not day.data.topic.strip()) %}
                    <h4>Prework</h4>
                    <ul>
                        <li>N/A</li>
                    </ul>
                    <h4>Referenced Reading</h4>
                    <ul>
                        <li>N/A</li>
                    </ul>
                    <hr />
                    <h3>During Class</h3>
                    <ul>
                        <li>Enjoy your time off!</li>
                    </ul>
                    {% else %}
                    {% set is_checkout = (day.data.checkout_info and day.data.checkout_info.has_checkout) %}
                    {% set has_quiz = (day.data.quiz_info and day.data.quiz_info.has_quiz) %}
                    {% if is_checkout %}
                    <h4>Prework</h4>
                    <ul>
                        {% set co_name = "Checkout" + day.data.checkout_info.checkout_number %}
                        {% if checkout_urls and co_name in checkout_urls %}
                            <li>Be prepared with your group for the in-class <a href="{{ checkout_urls[co_name] }}">checkout session</a></li>
                        {% else %}
                            <li>Be prepared with your group for the in-class checkout session</li>
                        {% endif %}
                    </ul>
                    <h4>Referenced Reading</h4>
                    <ul>
                        <li>N/A</li>
                    </ul>
                    <hr />
                    <h3>During Class</h3>
                    <ul>
                        <li>Checkout session so no notes or video will be posted here</li>
                    </ul>
                    {% elif has_quiz %}
                    <h4>Prework</h4>
                    <ul>
                        {% set quiz_name = "Quiz" + day.data.quiz_info.quiz_number %}
                        {% if quiz_urls and quiz_name in quiz_urls %}
                            <li><a href="{{ quiz_urls[quiz_name] }}">{{ day.data.quiz_info.study_text }}</a></li>
                        {% else %}
                            <li>{{ day.data.quiz_info.study_text }}</li>
                        {% endif %}
                    </ul>
                    <h4>Referenced Reading</h4>
                    <ul>
                        <li>N/A</li>
                    </ul>
                    <hr />
                    <h3>During Class</h3>
                    <ul>
                        <li>Quiz day - no notes or video will be posted here</li>
                    </ul>
                    {% else %}
                    <h4>Prework</h4>
                    <ul>
                        {% if day.data.prework_video_title and day.data.prework_video_title.strip() %}
                            {% set title_parts = day.data.prework_video_title.split(' - ', 1) %}
                            {% set display_title = 'Prework ' + day.data.lesson + ' - ' + title_parts[1] %}
                            <li>Video: <a href="{{ day.data.prework_video_link }}">{{ display_title }}</a></li>
                        {% endif %}
                        <li>Be ready to ask questions and talk with your classmates about the prework content!</li>
                    </ul>
                    <h4>Referenced Reading</h4>
                    <ul>
                        {% if day.data.referenced %}
                            <li> Textbook: {{ day.data.referenced }} </li>
                        {% else %}
                            <li> Textbook: N/A </li>
                        {% endif %}
                    </ul>
                    <hr />
                    <h3>During Class</h3>
                    <ul>
                        <li>Class Notes: TO BE POSTED</li>
                        <li>Class Recording: TO BE POSTED</li>
                    </ul>
                    {% endif %}
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<footer>
    <h2 style="text-align: center; background-color: #d5e0ec;"><span style="color: #000000;">Course Information</span></h2>
    <div class="content-box">
        <div class="grid-row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <div class="styleguide-section__grid-demo-element">
                    <div style="background-color: #fcf7d2; padding-left: 15px; text-align: center; padding-top: 5px; padding-bottom: 5px;"><span style="color: #000000; font-family: inherit; font-size: 1rem;">Lecture time and location:</span></div>
                    <div style="background-color: #fcf7d2; padding-left: 15px; text-align: center; padding-top: 5px; padding-bottom: 5px;"><span style="color: #000000;">{{ lecture_info.lecture_days }} {{ lecture_info.lecture_time }}</span></div>
                    <div style="background-color: #fcf7d2; padding-left: 15px; text-align: center; padding-top: 5px; padding-bottom: 5px;"><span style="color: #000000;">{{ lecture_info.lecture_location }}</span></div>
                    <p>&nbsp;</p>
                </div>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <div class="styleguide-section__grid-demo-element">
                    <div style="background-color: #fcf7d2; padding-left: 15px; text-align: center; padding-top: 5px; padding-bottom: 5px;">
                        <span style="color: #2c333e; font-family: inherit; font-size: 1rem;">
                            {% if pdf_urls.syllabus_schedule %}
                                <a href="{{ pdf_urls.syllabus_schedule }}" rel="noopener" style="color: #2c333e;">Full Schedule Calendar (PDF)</a>
                            {% else %}
                                Full Schedule Calendar (PDF)
                            {% endif %}
                            / <a href="https://umich.instructure.com/courses/{{ course_id }}/wiki" rel="noopener" style="color: #2c333e;">Canvas Modules</a>
                        </span>
                    </div>
                    <div style="background-color: #fcf7d2; padding-left: 15px; text-align: center; padding-top: 5px; padding-bottom: 5px;">
                        {% if pdf_urls.syllabus %}
                            <a href="{{ pdf_urls.syllabus }}" rel="noopener" style="color: #2c333e; font-family: inherit; font-size: 1rem;" dir="ltr" role="presentation">Course Syllabus (PDF)</a>
                        {% else %}
                            <span class="textLayer--absolute" style="font-family: inherit; font-size: 1rem;" dir="ltr" role="presentation">Course Syllabus (PDF)</span>
                        {% endif %}
                    </div>
                    <div style="background-color: #fcf7d2; padding-left: 15px; text-align: center; padding-top: 5px; padding-bottom: 5px;">
                        <a href="https://umich.instructure.com/courses/{{ course_id }}/pages/instructors-and-drop-in-hours-2" rel="noopener" style="color: #2c333e; font-family: inherit; font-size: 1rem;" dir="ltr" role="presentation">Instructors and Drop-In Hours</a>
                    </div>
                    <p>&nbsp;</p>
                </div>
            </div>
        </div>
    </div>
</footer>

</body>
</html>